## Post Merge Functionality Implementation Plan

### Overview
Implement a comprehensive post merge system that allows users to merge posts in two ways:
1. **Merge with other**: Merge the current post into another post
2. **Merge other here**: Merge other posts into the current post (like triage)

### Implementation Steps

#### 1. Database Schema Updates
- Add merge relationship tables to track post merges
- Add merge type enum (merge_into, merge_from)
- Add merge metadata (reason, merged_at, merged_by)

#### 2. API Endpoints
- `POST /api/posts/:id/merge` - Merge current post into another
- `POST /api/posts/:id/merge-here` - Merge other posts into current
- `GET /api/posts/:id/merge-options` - Get available merge candidates
- `GET /api/posts/search` - Enhanced search for merge dialog

#### 3. Frontend Components
- **MergeDialog**: Modal dialog with search functionality
- **MergeAction**: Button component that triggers merge dialog
- **MergeOptions**: Radio buttons for merge direction selection
- **PostSearch**: Search component similar to SearchAction

#### 4. Integration
- Update RequestNavigation to handle merge button clicks
- Add merge dialog to RequestDetail
- Implement proper error handling and loading states
- Add confirmation dialogs for destructive actions

#### 5. Business Logic
- Handle vote consolidation during merges
- Transfer comments and tags appropriately
- Update post status and metadata
- Maintain audit trail of merges

### Key Features
- Search-based post selection
- Merge direction options
- Permission-based access control
- Rollback capability
- Audit logging

### Files to Create/Modify
- Database schema files
- API route handlers
- Frontend components
- Type definitions
- Validation schemas